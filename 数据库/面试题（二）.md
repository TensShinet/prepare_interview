# 数据库面试题（二）



## 0X00 事务



### 事物的四大特性



+ A

原子性，要么完成，要么不完成



+ C



一致性，事务开始前和结束后，数据库的完整性约束没有被破坏



+ I



隔离性，由并发事务所做的修改必须与任何其他并发事务所做的修改隔离。通过锁机制实现隔离





+ D

持久性，事务一旦提交，则其结果是永久的，即使发生宕机的故障，也能恢复数据



### 什么是脏读？幻读？不可重复读？



+ 脏读



可能读取到其他会话中未提交事务修改的数据



+ 不可重复读



是指在一个事务内，多次读同一数据。但是数据不一致



+ 幻读



所以当事务A先前读取了数据，或者修改了全部数据，事务B还是可以insert数据提交，这时事务A就会发现莫名其妙多了一条之前没有的数据，这就是幻读



### 事物有哪些隔离级别



- 未提交读(Read Uncommitted)：允许脏读，也就是可能读取到其他会话中未提交事务修改的数据
- 提交读(Read Committed)：只能读取到已经提交的数据。Oracle等多数数据库默认都是该级别 (不重复读)
- 可重复读(Repeated Read)：可重复读。在同一个事务内的查询都是事务开始时刻一致的，InnoDB默认级别。在SQL标准中，该隔离级别消除了不可重复读，但是还存在幻象读
- 串行读(Serializable)：完全串行化的读，每次读都需要获得表级共享锁，读写相互都会阻塞



## 0X01 锁





### 隔离级别与锁的关系



+ 未提交读



读不加锁，数据的写入，更新等一些操作需要加锁



+ Read Committed



