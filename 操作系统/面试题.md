# 操作系统基础知识





## 0X00 总体概念





### 什么是用户态与内核态



+ 什么是



用户态和内核态是 CPU 硬件强制执行的，以 x64 的 CPU 来看它有四个保护环，通常仅使用 0 环和 3 环，当在 0 环操作的时候就是处于「内核态」，在 3 环操作的时候就是处于「用户态」



+ 什么时候切换



有三种情况可以由用户态切换到内核态



1. 系统调用（write）

2. 异常（比如缺页）

3. 外围设备中断

   当外围设备完成用户的请求以后，会主动发出中断信号，这时 CPU 会暂停处理下一条指令，转而去处理，中断信号对应的处理程序。如果先前的状态是用户态，那么自然而然的就会从用户态切换到内核态



### 0X01 进程





### 进程 VS 线程



进程是`资源的最小单位`，线程通常指的是「内核级线程」它是调度的最小单位。



+ 一个程序至少有一个进程,一个进程至少有一个线程。
+ 进程在执行的过程中有独立的内存单元，而多个进程共享内存。
+ 虽然线程拥有单独的程序运行入口，出口，但不能独立执行。



### 进程有哪些状态



简单来说，进程有三个状态



![](https://uk-1259555870.cos.eu-frankfurt.myqcloud.com/20200218102010.png)



+ 就绪状态：进程获得除了 CPU 以外的所有资源。

+ 运行状态：一个 CPU 的一个核只能有一个进程处于运行状态。
+ 阻塞态又称等待状态：等待某资源可用（不包括 CPU）的状态。



### 进程间通信



+ **管道**



**管道**是指用于**连接一个读进程和一个写进程的一个共享文件**，以字符流将数据写入文件。管道分为无名管道和有名管道：



1. 无名管道是半双工的通信方式，数据只能单向流动，只能在父子兄弟之间流动
2. 有名管道也是半双工，但是由于有一个具体的文件，所以运行无亲缘关系的进程之间互相通信



管道是不可持久化的



+ **消息队列**



**消息队列**指的是**进程间的数据交换是以格式化的消息(Message)为单位的**，再由消息组成的链表，形成队列。



可持久化，但是一旦宕机也不会存在了



+ **信号量**



也分




+ **共享内存**




### Glibc2.23 堆管理机制

















